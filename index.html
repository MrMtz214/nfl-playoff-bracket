<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 NFL Playoff Bracket</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .selected { background-color: #1d4ed8 !important; border-color: #60a5fa !important; color: white !important; transform: scale(1.02); }
        .matchup-card { transition: all 0.2s ease; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen pb-20 font-sans">

    <div class="max-w-6xl mx-auto px-4">
        <header class="text-center py-12">
            <h1 class="text-6xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">
                ROAD TO SB LX
            </h1>
            <p class="text-slate-500 mt-2 font-bold tracking-widest uppercase">Official 2026 Playoff Pool</p>
        </header>

        <div id="auth-section" class="max-w-md mx-auto bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-2xl mb-12">
            <h2 class="text-center text-xl font-bold mb-6">Create Your Entry</h2>
            <input type="text" id="userName" placeholder="Full Name" class="w-full p-3 mb-4 rounded bg-slate-900 border border-slate-700 outline-none focus:border-blue-500 transition">
            <input type="email" id="userEmail" placeholder="Email Address" class="w-full p-3 mb-6 rounded bg-slate-900 border border-slate-700 outline-none focus:border-blue-500 transition">
            <button onclick="startBracket()" class="w-full bg-blue-600 hover:bg-blue-500 p-4 rounded-xl font-black uppercase tracking-widest transition shadow-lg">Begin Picks</button>
        </div>

        <div id="main-content" class="hidden space-y-12 animate-in fade-in duration-700">
            <div id="bracket-render" class="grid grid-cols-1 gap-12"></div>
            <div class="text-center pt-10 border-t border-slate-800">
                <button onclick="submitFinalPicks()" class="bg-emerald-600 hover:bg-emerald-500 px-16 py-5 rounded-full font-black text-2xl shadow-xl transform hover:scale-105 transition">
                    LOCK IN BRACKET
                </button>
            </div>
        </div>

        <div id="leaderboard-section" class="mt-20 max-w-4xl mx-auto">
            <h2 class="text-3xl font-black italic text-center mb-8 text-slate-400">COMMUNITY ENTRIES</h2>
            <div class="bg-slate-800 rounded-3xl border border-slate-700 overflow-hidden shadow-2xl">
                <table class="w-full text-left border-collapse">
                    <thead class="bg-slate-900 text-slate-500 text-xs uppercase font-black">
                        <tr>
                            <th class="p-6">Predictor</th>
                            <th class="p-6">SB Pick</th>
                            <th class="p-6 text-center">Score Tiebreaker</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body" class="divide-y divide-slate-700"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="bracket-modal" class="hidden fixed inset-0 glass z-50 flex items-center justify-center p-4">
        <div class="bg-slate-800 w-full max-w-xl rounded-3xl border border-slate-600 p-8 shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modal-user-name" class="text-2xl font-black italic text-blue-400"></h2>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <div id="modal-content" class="space-y-4"></div>
        </div>
    </div>

<script>
// --- CONFIGURATION ---
const SUPABASE_URL = 'https://qqqsdhtwlbhnlkuzjiwu.supabase.co;' 
const SUPABASE_KEY = 'sb_publishable_EV3pltkn-OfizajBL7ApeQ_QDOBkNPl';
const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

const teamData = {
    afc: { 1: { name: "Broncos", id: "den" }, 2: { name: "Patriots", id: "ne" }, 3: { name: "Jaguars", id: "jax" }, 4: { name: "Steelers", id: "pit" }, 5: { name: "Texans", id: "hou" }, 6: { name: "Bills", id: "buf" }, 7: { name: "Chargers", id: "lac" } },
    nfc: { 1: { name: "Seahawks", id: "sea" }, 2: { name: "Bears", id: "chi" }, 3: { name: "Eagles", id: "phi" }, 4: { name: "Panthers", id: "car" }, 5: { name: "Rams", id: "lar" }, 6: { name: "49ers", id: "sf" }, 7: { name: "Packers", id: "gb" } }
};

let picks = { afc: { wc: {}, div: {}, conf: null }, nfc: { wc: {}, div: {}, conf: null }, sb_winner: null, sb_score: { afc: 0, nfc: 0 } };

// --- LOGIC ---
const getLogo = (id) => `https://a.espncdn.com/i/teamlogos/nfl/500/${id}.png`;

function startBracket() {
    if(!document.getElementById('userName').value || !document.getElementById('userEmail').value) return alert("Fill in your info!");
    document.getElementById('auth-section').classList.add('hidden');
    document.getElementById('main-content').classList.remove('hidden');
    render();
}

async function submitFinalPicks() {
    if(!picks.sb_winner) return alert("Finish the bracket first!");
    const { error } = await _supabase.from('playoff_picks').insert([{
        user_name: document.getElementById('userName').value,
        email: document.getElementById('userEmail').value,
        picks: picks
    }]);

    if(error) {
        alert(error.code === '23505' ? "This email has already submitted!" : error.message);
    } else {
        alert("Bracket submitted successfully!");
        location.reload();
    }
}

async function loadLeaderboard() {
    const { data } = await _supabase.from('playoff_picks').select('*').order('created_at', { ascending: false });
    const tbody = document.getElementById('leaderboard-body');
    data?.forEach(entry => {
        const row = document.createElement('tr');
        row.className = "hover:bg-slate-700/50 transition cursor-pointer";
        row.onclick = () => openModal(entry.user_name, entry.picks);
        const winId = entry.picks.sb_winner;
        const winConf = winId <= 7 ? 'afc' : 'nfc';
        row.innerHTML = `<td class="p-6 font-bold">üîç ${entry.user_name}</td>
            <td class="p-6 flex items-center gap-3"><img src="${getLogo(teamData[winConf][winId].id)}" class="w-8 h-8">${teamData[winConf][winId].name}</td>
            <td class="p-6 text-center font-mono text-emerald-400 font-bold">${entry.picks.sb_score.afc} - ${entry.picks.sb_score.nfc}</td>`;
        tbody.appendChild(row);
    });
}

// (Insert the render, openModal, and createMatchup functions from previous steps here)
// ... [Placeholder for the rendering logic provided in the previous turn] ...

loadLeaderboard();
</script>
</body>
</html>
